# set postgresql values for postgresql dependency charts.
# we set postgres username, password, and database name.
# make sure to apply the following values in caaas config values.
postgresql:
  auth:
    username: "root"
    password: "password"
    database: "caaas-db"

# set caaas configs.
caaas:
  # image repository is published over github-container-registery
  image:
    repository: ghcr.io/amirhnajafiz/caaas
    pullPolicy: IfNotPresent
    tag: "v0.1.0"

  # change service type based on your desire, it will be set for both api and gateway.
  # in order to expose gateways, create an ingress or an external service.
  service:
    type: ClusterIP
    port: 80

  # resources will be applied to gateway and api applications
  resources:
    api:
      limits:
        cpu: 100m
        memory: 128Mi
      requests:
        cpu: 100m
        memory: 128Mi
    gateway:
      limits:
        cpu: 100m
        memory: 128Mi
      requests:
        cpu: 100m
        memory: 128Mi
    
  # setup config files for api, migrate, and service containers
  configs:
    api:
      mode: "api"
      http_server_port: 8080 # default value is 8080
    gateway:
      mode: "gateway" # an enum of (api, gateway, and migrate), default is gateway
      http_server_port: 8080 # default value is 8080
      # prometheus metrics can be exported as a separate server.
      metrics:
        enable: true # if set to disable, no metrics will export
        port: 8081 # if enabled, it will be the exporter's port
      # keys and settings for JWTs.
      auth:
        private_key: "private"
        encryption_salt: "salt"
        tokens_expire_time: 30 # in minutes, default is 30
    common: # common section will be applied to all configmaps
      logger:
        level: "error" # an enum of (debug, info, warn, error, fatal, panic) default is error
      # postgres cluster connection arguments.
      storage:
        host: "postgresql"
        port: 5432
        user: "root"
        pass: "password"
        database: "caaas-db" 
